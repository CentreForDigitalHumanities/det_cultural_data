{
  "hash": "7969ef2e922acfd1186402d615d6b9ce",
  "result": {
    "markdown": "---\ntitle: \"Analysing data\"\nexecute:   \n  enabled: true\n  error: true\n  freeze: auto\n---\n\n\n\n## Previous steps {.unnumbered}\n\n::: {.cell execution_count=2}\n``` {.python .cell-code}\nimport pandas as pd\ndata_file = 'data/data.csv'\ndf = pd.read_csv(data_file)\ncleaned_df = df.drop('VOYAGEID2',axis=1).dropna(subset=['Captives arrived at 1st port']).fillna(\"unknown\")\ncleaned_col_names = cleaned_df.columns\ncleaned_df.head(10)\n```\n\n::: {.cell-output .cell-output-display execution_count=2}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Year of arrival at port of disembarkation</th>\n      <th>Voyage ID</th>\n      <th>Vessel name</th>\n      <th>Voyage itinerary imputed port where began (ptdepimp) place</th>\n      <th>Voyage itinerary imputed principal place of slave purchase (mjbyptimp)</th>\n      <th>Voyage itinerary imputed principal port of slave disembarkation (mjslptimp) place</th>\n      <th>Captives arrived at 1st port</th>\n      <th>Captain's name</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>1714.0</td>\n      <td>16109</td>\n      <td>Freeke Gally</td>\n      <td>Bristol</td>\n      <td>unknown</td>\n      <td>Kingston</td>\n      <td>283.0</td>\n      <td>Neale, Alexander</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>1714.0</td>\n      <td>16111</td>\n      <td>Jacob</td>\n      <td>Bristol</td>\n      <td>unknown</td>\n      <td>Kingston</td>\n      <td>130.0</td>\n      <td>Nicholls, Philip</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>1714.0</td>\n      <td>16112</td>\n      <td>Jason Gally</td>\n      <td>Bristol</td>\n      <td>unknown</td>\n      <td>Port Royal</td>\n      <td>278.0</td>\n      <td>Plummer, John</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>1714.0</td>\n      <td>16114</td>\n      <td>Mercy Gally</td>\n      <td>Bristol</td>\n      <td>Africa, port unspecified</td>\n      <td>Barbados, place unspecified</td>\n      <td>190.0</td>\n      <td>Scott, John</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>1714.0</td>\n      <td>16115</td>\n      <td>Mermaid Gally</td>\n      <td>Bristol</td>\n      <td>Cape Verde Islands</td>\n      <td>Kingston</td>\n      <td>72.0</td>\n      <td>Banbury, John&lt;br/&gt; Copinger, James</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>1714.0</td>\n      <td>16117</td>\n      <td>Peterborough</td>\n      <td>Bristol</td>\n      <td>Africa, port unspecified</td>\n      <td>Barbados, place unspecified</td>\n      <td>200.0</td>\n      <td>Shawe, John&lt;br/&gt; Martin, Joseph</td>\n    </tr>\n    <tr>\n      <th>9</th>\n      <td>1713.0</td>\n      <td>16118</td>\n      <td>Resolution</td>\n      <td>Bristol</td>\n      <td>Gold Coast, port unspecified</td>\n      <td>Barbados, place unspecified</td>\n      <td>255.0</td>\n      <td>Williams, Charles</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>1714.0</td>\n      <td>16119</td>\n      <td>Richard and William</td>\n      <td>Bristol</td>\n      <td>unknown</td>\n      <td>Port Royal</td>\n      <td>55.0</td>\n      <td>Beckham, George&lt;br/&gt; Spring, Martin</td>\n    </tr>\n    <tr>\n      <th>11</th>\n      <td>1713.0</td>\n      <td>16120</td>\n      <td>Rotchdale Gally</td>\n      <td>Bristol</td>\n      <td>Africa, port unspecified</td>\n      <td>Barbados, place unspecified</td>\n      <td>96.0</td>\n      <td>Hitchings, John</td>\n    </tr>\n    <tr>\n      <th>12</th>\n      <td>1714.0</td>\n      <td>16121</td>\n      <td>Tunbridge Gally</td>\n      <td>Bristol</td>\n      <td>Africa, port unspecified</td>\n      <td>Barbados, place unspecified</td>\n      <td>200.0</td>\n      <td>Skinner, Peter</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n::: {.cell execution_count=3}\n``` {.python .cell-code}\nprint(\"Index) Column name\") \nfor i,name in enumerate(cleaned_df.columns): \n    print(i,\")\",name) \n```\n\n::: {.cell-output .cell-output-stdout}\n```\nIndex) Column name\n0 ) Year of arrival at port of disembarkation\n1 ) Voyage ID\n2 ) Vessel name\n3 ) Voyage itinerary imputed port where began (ptdepimp) place\n4 ) Voyage itinerary imputed principal place of slave purchase (mjbyptimp) \n5 ) Voyage itinerary imputed principal port of slave disembarkation (mjslptimp) place\n6 ) Captives arrived at 1st port\n7 ) Captain's name\n```\n:::\n:::\n\n\n# Data Analysis\n\nIt is finally time to ask questions to our data. Let's start with some simple ones regaring the time span of our dataset.\n\n::: {.cell execution_count=4}\n\n::: {.cell-output .cell-output-display execution_count=4}\n```{=html}\n<style><style>.box {\n\tborder: 1px solid;\n    border-radius: 5px;\n\tpadding: 10px;\n\tmargin: 0px 10px 0px 10px;\n}\n\n.sub-box {\n  display: flex; \n  flex-direction: row; \n  align-items: center;\n}\n\n.code {\n\tbackground: #ececec; \n}\n\n.pre {\n\tbackground: #ececec; \n}\n\n.type1 {\n\tborder-color: black;\n\tbackground-color: rgb(246, 255, 222); \n}\n\n.type2 {\n\tborder-color: black;\n\tbackground-color: rgb(227, 242, 193); \n}\n\n.type3 {\n\tborder-color: black;\n\tbackground-color: rgb(201, 219, 178); \n}\n\n.type4 {\n\tborder-color: black;\n\tbackground-color: rgb(170, 200, 167); \n}\n\n.type5 {\n    border-color: black;\n\tbackground-color: rgb(181, 192, 208);\n}\n\n.type6 {\n    border-color: black;\n\tbackground-color: rgb(255, 195, 116);\n}\n\n.picture {\n\twidth: 30px; \n\theight: 30px;\n\tmargin: 0 0 0px 0;\n}\n\n.ctitle {\n    margin: 0px 0px 0px 20px;\n}</style></style> \n            <div class=\"box type1\">\n                    <div class=\"sub-box\">\n                        <img src=\"myutils/icons/question.png\" alt=\"Icon\" class=\"picture\"/>\n                        <div class=\"ctitle\">\n                            <u><h4><strong>Question(s)</strong></h4></u>\n                        </div>\n                    </div>\n                    <div class=\"sub-box\">\n                        <ul><li>What's the year of the very first and last voyage record?</li><li>How many years does our data set span?</li><li>How does that compare to unfiltered data?</li></ul>\n                    </div>\n            </div>\n        \n            <div class=\"box type2\">\n                <div class=\"sub-box\">\n                    <img src=\"myutils/icons/thinking.png\" alt=\"Icon\" class=\"picture\"/>\n                    <div class=\"ctitle\">\n                        <u><h4><strong>What to do?</strong></h4></u>\n                    </div>\n                </div>\n                <div class=\"sub-box\">\n                    <ul><li>Go through the \"Year of arrival at port of disembarkation\" column and look for the largest and smallest number;</li><li>Repeat the same procedure for the raw data set and compare.</li></ul>\n                </div>\n            </div>    \n        \n            <div class=\"box type3\">\n                <div class=\"sub-box\">\n                    <img src=\"myutils/icons/tools.png\" alt=\"Icon\" class=\"picture\"/>\n                    <div class=\"ctitle\">\n                        <u><h4><strong>(Python) Tools</strong></h4></u>\n                    </div>\n                </div>\n                <div class=\"sub-box\">\n                    <ul><li><code>pandas</code> method <code>.iloc()</code>;</li><li>Python functions <code>min()</code> and <code>max()</code>;</li><li>Python <code>print()</code> function.</li></ul>\n                </div>            \n            </div>    \n        \n            <div class=\"box type4\">\n                <div class=\"sub-box\">\n                    <img src=\"myutils/icons/code_expl.png\" alt=\"Icon\" class=\"picture\"/>\n                    <div class=\"ctitle\">\n                        <u><h4><strong>Coding</strong></h4></u>\n                    </div>\n                </div>\n                <div class=\"sub-box\">\n                    <div>\n                        <ul><li><code>arrival_year = cleaned_df.iloc[:,0]</code>, we use the method <code>.iloc[]</code> to select the first column     of the DataFrame <code>cleaned_df</code> and we store the column in the variable <code>arrival_year</code>;</li><li><pre  style=\"display: inline-block; float: left; margin-right: 10px\">first_year = min(arrival_year)\nlast_year = max(arrival_year)\nyear_span = last_year-first_year</pre>, we use the Python functions <code>min()</code> and <code>max()</code> to compute the minimum and     maximum values of the year column storing their values in <code>first_year</code> and <code>last_year</code>,     respectively. We also compute the difference between these two values and store the result in <code>year_span</code>.</li></ul>\n                    </div>       \n                </div>\n            </div>    \n        \n```\n:::\n:::\n\n\n::: {.cell execution_count=5}\n``` {.python .cell-code}\narrival_year = cleaned_df.iloc[:,0]\nfirst_year = min(arrival_year)\nlast_year = max(arrival_year)\nyear_span = last_year-first_year\n\nprint(first_year)\nprint(last_year)\nprint(year_span)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n1520.0\n1866.0\n346.0\n```\n:::\n:::\n\n\n::: {.cell execution_count=6}\n``` {.python .cell-code}\narrival_year_raw = df.iloc[:,0]\nfirst_year_raw = min(arrival_year_raw)\nlast_year_raw = max(arrival_year_raw)\nyear_span_raw = last_year_raw-first_year_raw\n\nprint(first_year_raw)\nprint(last_year_raw)\nprint(year_span_raw)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n1514.0\n1866.0\n352.0\n```\n:::\n:::\n\n\n::: {.cell execution_count=7}\n\n::: {.cell-output .cell-output-display execution_count=7}\n```{=html}\n<style><style>.box {\n\tborder: 1px solid;\n    border-radius: 5px;\n\tpadding: 10px;\n\tmargin: 0px 10px 0px 10px;\n}\n\n.sub-box {\n  display: flex; \n  flex-direction: row; \n  align-items: center;\n}\n\n.code {\n\tbackground: #ececec; \n}\n\n.pre {\n\tbackground: #ececec; \n}\n\n.type1 {\n\tborder-color: black;\n\tbackground-color: rgb(246, 255, 222); \n}\n\n.type2 {\n\tborder-color: black;\n\tbackground-color: rgb(227, 242, 193); \n}\n\n.type3 {\n\tborder-color: black;\n\tbackground-color: rgb(201, 219, 178); \n}\n\n.type4 {\n\tborder-color: black;\n\tbackground-color: rgb(170, 200, 167); \n}\n\n.type5 {\n    border-color: black;\n\tbackground-color: rgb(181, 192, 208);\n}\n\n.type6 {\n    border-color: black;\n\tbackground-color: rgb(255, 195, 116);\n}\n\n.picture {\n\twidth: 30px; \n\theight: 30px;\n\tmargin: 0 0 0px 0;\n}\n\n.ctitle {\n    margin: 0px 0px 0px 20px;\n}</style></style>\n            <div class=\"box type6\">\n                <div class=\"sub-box\">\n                    <img src=\"myutils/icons/solution.png\" alt=\"Icon\" class=\"picture\"/>\n                    <div class=\"ctitle\">\n                        <u><h4><strong>Answer</strong></h4></u>\n                    </div>\n                </div>\n                <div class=\"sub-box\">\n                    Our cleaned data spans from 1520 to 1866, so 346. Comparing these numbers with our original, uncleaned, DataFrame, we can notice that the filtered data does not include the period between 1514 and 1520, so 6 years.\n                </div>\n            </div>    \n        \n```\n:::\n:::\n\n\nWe can keep asking questions about numerical values. We focused on time in our last question, let's focus on the number of captives this time.\n\n::: {.cell execution_count=8}\n\n::: {.cell-output .cell-output-display execution_count=8}\n```{=html}\n<style><style>.box {\n\tborder: 1px solid;\n    border-radius: 5px;\n\tpadding: 10px;\n\tmargin: 0px 10px 0px 10px;\n}\n\n.sub-box {\n  display: flex; \n  flex-direction: row; \n  align-items: center;\n}\n\n.code {\n\tbackground: #ececec; \n}\n\n.pre {\n\tbackground: #ececec; \n}\n\n.type1 {\n\tborder-color: black;\n\tbackground-color: rgb(246, 255, 222); \n}\n\n.type2 {\n\tborder-color: black;\n\tbackground-color: rgb(227, 242, 193); \n}\n\n.type3 {\n\tborder-color: black;\n\tbackground-color: rgb(201, 219, 178); \n}\n\n.type4 {\n\tborder-color: black;\n\tbackground-color: rgb(170, 200, 167); \n}\n\n.type5 {\n    border-color: black;\n\tbackground-color: rgb(181, 192, 208);\n}\n\n.type6 {\n    border-color: black;\n\tbackground-color: rgb(255, 195, 116);\n}\n\n.picture {\n\twidth: 30px; \n\theight: 30px;\n\tmargin: 0 0 0px 0;\n}\n\n.ctitle {\n    margin: 0px 0px 0px 20px;\n}</style></style> \n            <div class=\"box type1\">\n                    <div class=\"sub-box\">\n                        <img src=\"myutils/icons/question.png\" alt=\"Icon\" class=\"picture\"/>\n                        <div class=\"ctitle\">\n                            <u><h4><strong>Question(s)</strong></h4></u>\n                        </div>\n                    </div>\n                    <div class=\"sub-box\">\n                        <ul><li>How many captives have been disembarked between 1520 and 1866?</li><li>How many captives have been disembarked on average per voyage?</li><li>How many captives have been disembarked on average per year?</li><li>How do these numbers change looking at the raw data?</li></ul>\n                    </div>\n            </div>\n        \n            <div class=\"box type2\">\n                <div class=\"sub-box\">\n                    <img src=\"myutils/icons/thinking.png\" alt=\"Icon\" class=\"picture\"/>\n                    <div class=\"ctitle\">\n                        <u><h4><strong>What to do?</strong></h4></u>\n                    </div>\n                </div>\n                <div class=\"sub-box\">\n                    <ul><li>Go through the \"Captives arrived at 1st port\" column and compute the total number of captives;</li><li>Divide the previous result by the number of voyages;</li><li>Divide the total number of captives by the number of years;</li><li>Adjust the previous estimates considering the average number of captives per voyage and the number of filtered rows.</li></ul>\n                </div>\n            </div>    \n        \n            <div class=\"box type3\">\n                <div class=\"sub-box\">\n                    <img src=\"myutils/icons/tools.png\" alt=\"Icon\" class=\"picture\"/>\n                    <div class=\"ctitle\">\n                        <u><h4><strong>(Python) Tools</strong></h4></u>\n                    </div>\n                </div>\n                <div class=\"sub-box\">\n                    <ul><li><code>pandas</code> method <code>.iloc()</code>;</li><li>Python function <code>sum()</code>;</li><li>Python function <code>len()</code>;</li><li>Python function <code>round()</code>;</li><li>Python function <code>print()</code> .</li></ul>\n                </div>            \n            </div>    \n        \n            <div class=\"box type4\">\n                <div class=\"sub-box\">\n                    <img src=\"myutils/icons/code_expl.png\" alt=\"Icon\" class=\"picture\"/>\n                    <div class=\"ctitle\">\n                        <u><h4><strong>Coding</strong></h4></u>\n                    </div>\n                </div>\n                <div class=\"sub-box\">\n                    <div>\n                        <ul><li><code>n_captives = cleaned_df.iloc[:,6]</code>, we apply the method <code>.iloc[]</code> to select the     \"Captives arrived at 1st port\" column and we store the column in the variable <code>n_captives</code>;</li><li><code>tot_captives = sum(n_captives)</code>, we use the Python function <code>sum()</code> to compute the sum     of all the values in <code>n_captives</code> and we stored the result in the variable <code>tot_captives</code></li><li><pre  style=\"display: inline-block; float: left; margin-right: 10px\">ave_cap_per_voyage = tot_captives/len(cleaned_df)\nave_cap_per_year = tot_captives/year_span</pre>, we use the total number of captives just computed to calculate the average number of captives     per vorage (dividing it by the number of rows) and per year (dividing it by the year span). We store the result     in <code>ave_cap_per_voyage</code> and <code>ave_cap_per_year</code>, respectively;</li><li><pre  style=\"display: inline-block; float: left; margin-right: 10px\">filtered_rows = len(df)-len(cleaned_df)\ntot_captives_ext = tot_captives + ave_cap_per_voyage*filtered_rows\nave_cap_per_year = tot_captives/year_span</pre>, we compute the number of filtered rows subtracting the length of our original DataFrame <code>df</code>     by the length of our cleaned DataFrame <code>cleaned_df</code>. Multiplying this number by the average number of     captives per voyage (remember that in our DataFrames each row corresponds to a voyage), we obtain an estimate of the     number of captives that have not been considered as the corresponding data is missing and, as such, it has been filtered     out from our analysis. We store this estimate in the variable <code>tot_captives_ext</code>. We then adjust our estimate     of the number of captives per years using this value and dividing it by <code>year_span_raw</code>, the year span of     our original DataFrame. We store this value into the variable <code>ave_cap_per_year_adj</code>;</li><li><code>print(round(<result>))</code>, we print different results related to people using the Python function     <code>round()</code> that, without any other argument, approximate decimal numbers to the closest integer.</li></ul>\n                    </div>       \n                </div>\n            </div>    \n        \n```\n:::\n:::\n\n\n::: {.cell execution_count=9}\n``` {.python .cell-code}\nn_captives = cleaned_df.iloc[:,6]\ntot_captives = sum(n_captives)\nave_cap_per_voyage = tot_captives/len(cleaned_df)\nave_cap_per_year = tot_captives/year_span\nprint('Total n. of captives:',tot_captives)\nprint('Average captives per voyage',round(ave_cap_per_voyage))\nprint('Average captives per year',round(ave_cap_per_year))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nTotal n. of captives: 5082756.0\nAverage captives per voyage 276\nAverage captives per year 14690\n```\n:::\n:::\n\n\n::: {.cell execution_count=10}\n``` {.python .cell-code}\nfiltered_rows = len(df)-len(cleaned_df)\ntot_captives_ext = tot_captives + ave_cap_per_voyage*filtered_rows\nave_cap_per_year_adj = tot_captives_ext/year_span_raw\nprint('Extimated total n. of captives',round(tot_captives_ext))\nprint('Adjusted average captives per year', round(ave_cap_per_year_adj))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nExtimated total n. of captives 9981894\nAdjusted average captives per year 28358\n```\n:::\n:::\n\n\n::: {.cell execution_count=11}\n\n::: {.cell-output .cell-output-display execution_count=11}\n```{=html}\n<style><style>.box {\n\tborder: 1px solid;\n    border-radius: 5px;\n\tpadding: 10px;\n\tmargin: 0px 10px 0px 10px;\n}\n\n.sub-box {\n  display: flex; \n  flex-direction: row; \n  align-items: center;\n}\n\n.code {\n\tbackground: #ececec; \n}\n\n.pre {\n\tbackground: #ececec; \n}\n\n.type1 {\n\tborder-color: black;\n\tbackground-color: rgb(246, 255, 222); \n}\n\n.type2 {\n\tborder-color: black;\n\tbackground-color: rgb(227, 242, 193); \n}\n\n.type3 {\n\tborder-color: black;\n\tbackground-color: rgb(201, 219, 178); \n}\n\n.type4 {\n\tborder-color: black;\n\tbackground-color: rgb(170, 200, 167); \n}\n\n.type5 {\n    border-color: black;\n\tbackground-color: rgb(181, 192, 208);\n}\n\n.type6 {\n    border-color: black;\n\tbackground-color: rgb(255, 195, 116);\n}\n\n.picture {\n\twidth: 30px; \n\theight: 30px;\n\tmargin: 0 0 0px 0;\n}\n\n.ctitle {\n    margin: 0px 0px 0px 20px;\n}</style></style>\n            <div class=\"box type6\">\n                <div class=\"sub-box\">\n                    <img src=\"myutils/icons/solution.png\" alt=\"Icon\" class=\"picture\"/>\n                    <div class=\"ctitle\">\n                        <u><h4><strong>Answer</strong></h4></u>\n                    </div>\n                </div>\n                <div class=\"sub-box\">\n                    Our first estimate of the total number of captives was 5 082 756 in the time period between 1520 and 1866,  and a corresponding average of captives per year of 14 690. However, this estimate did not take into account filtered data. In our data filtering we excluded many rows, so many voyages. Almost 50% of the initial voyages has been filtered our. We therefore computed the average of captives per voyage and estimated the number of filtered out captives. The result is a number that almost double (as expected) our previous estimate: 9 981 894 people, with an average of 28 358 people traded per year.\n                </div>\n            </div>    \n        \n```\n:::\n:::\n\n\nSo far we computed numbers, but data can be most effectively described using visualization. In our DataFrame we have information about three different locations: the place where the voyage started, the principal port of slave purchase, and the principal port of slave disembarkation. Let's have a closer look at these locations.\n\n::: {.cell execution_count=12}\n\n::: {.cell-output .cell-output-display execution_count=12}\n```{=html}\n<style><style>.box {\n\tborder: 1px solid;\n    border-radius: 5px;\n\tpadding: 10px;\n\tmargin: 0px 10px 0px 10px;\n}\n\n.sub-box {\n  display: flex; \n  flex-direction: row; \n  align-items: center;\n}\n\n.code {\n\tbackground: #ececec; \n}\n\n.pre {\n\tbackground: #ececec; \n}\n\n.type1 {\n\tborder-color: black;\n\tbackground-color: rgb(246, 255, 222); \n}\n\n.type2 {\n\tborder-color: black;\n\tbackground-color: rgb(227, 242, 193); \n}\n\n.type3 {\n\tborder-color: black;\n\tbackground-color: rgb(201, 219, 178); \n}\n\n.type4 {\n\tborder-color: black;\n\tbackground-color: rgb(170, 200, 167); \n}\n\n.type5 {\n    border-color: black;\n\tbackground-color: rgb(181, 192, 208);\n}\n\n.type6 {\n    border-color: black;\n\tbackground-color: rgb(255, 195, 116);\n}\n\n.picture {\n\twidth: 30px; \n\theight: 30px;\n\tmargin: 0 0 0px 0;\n}\n\n.ctitle {\n    margin: 0px 0px 0px 20px;\n}</style></style> \n            <div class=\"box type1\">\n                    <div class=\"sub-box\">\n                        <img src=\"myutils/icons/question.png\" alt=\"Icon\" class=\"picture\"/>\n                        <div class=\"ctitle\">\n                            <u><h4><strong>Question(s)</strong></h4></u>\n                        </div>\n                    </div>\n                    <div class=\"sub-box\">\n                        <ul><li>Which is the town where most of the voyages started?</li><li>Can we sort towns according to the number of voyages that started there?</li><li>How about the other two locations, place of slave purchase and disembarkation?</li></ul>\n                    </div>\n            </div>\n        \n            <div class=\"box type2\">\n                <div class=\"sub-box\">\n                    <img src=\"myutils/icons/thinking.png\" alt=\"Icon\" class=\"picture\"/>\n                    <div class=\"ctitle\">\n                        <u><h4><strong>What to do?</strong></h4></u>\n                    </div>\n                </div>\n                <div class=\"sub-box\">\n                    <ul><li>Go through the \"Voyage itinerary imputed port where began (ptdepimp) place\" column and count how many times     a town name occurs;</li><li>Repeat this procedure for all the towns;</li><li>Sort towns according to how many times their names show up;</li><li>Make a plot with town names on the vertical axis and how many times they have been starting point for voyages in     the orizontal axis;</li><li>Repeat the same procedure for the other two locations: port of slave purchase and disembarkation.</li></ul>\n                </div>\n            </div>    \n        \n            <div class=\"box type3\">\n                <div class=\"sub-box\">\n                    <img src=\"myutils/icons/tools.png\" alt=\"Icon\" class=\"picture\"/>\n                    <div class=\"ctitle\">\n                        <u><h4><strong>(Python) Tools</strong></h4></u>\n                    </div>\n                </div>\n                <div class=\"sub-box\">\n                    <ul><li><code>pandas</code> method <code>.iloc[]</code></li><li><code>pandas</code> method <code>.value_counts()</code></li><li>Python package <code>seaborn</code>;</li><li>Python package <code>matplotlib.pyplot</code>;</li><li><code>matplotlib.pyplot</code> function <code>.subplots()</code>;</li><li><code>seaborn</code> function <code>.barplot()</code></li></ul>\n                </div>            \n            </div>    \n        \n            <div class=\"box type4\">\n                <div class=\"sub-box\">\n                    <img src=\"myutils/icons/code_expl.png\" alt=\"Icon\" class=\"picture\"/>\n                    <div class=\"ctitle\">\n                        <u><h4><strong>Coding</strong></h4></u>\n                    </div>\n                </div>\n                <div class=\"sub-box\">\n                    <div>\n                        <ul><li><code>start_port = cleaned_df.iloc[:,3]</code>, we use the <code>pandas</code> method <code>.iloc[]</code> to     select our target column. In this case it is \"Voyage itinerary imputed port where began (ptdepimp) place\", the     fourth column of our DataFrame (Python index 3). We store this column in the variable <code>start_port</code>;</li><li><code>start_port_counts = start_port.value_counts()</code>, we want to count how many times a certain town name     occurs in our column and the <code>pandas</code> method <code>.value_counts()</code> does exactly this. After     applying the method, we obtain a <code>pandas</code> DataFrame with a single column (a Series) having as index the     name of the town and as value the number of times that town shows up in the column <code>start_port</code>. We store     this result in <code>start_port_counts</code>;</li><li><code>start_port_counts</code>, we display the content of the variable <code>start_port_counts</code> on the screen;</li><li><code>import seaborn as sns</code>, we import the Python package <code>seaborn</code> and we give it the alias     <code>sns</code>. This means that, from now own, if we want to use a certain function belonging to this package, we     will call it using: <code>sns.function_name()</code>;</li><li><code>import matplotlib.pyplot as plt</code>, we import the Python package <code>matplotlib.pyplot</code> and we     give it the alias <code>plt</code>;</li><li><code>fig, new_ax = plt.subplots(nrows=1,ncols=1,figsize=(8,8))</code>, we use the <code>matplotlib.pyplot</code>     function <code>.subplots()</code> to initialise an empty plot. <code>.subplots()</code> it is generally used to create     a grid of plots and its first two arguments (<code>nrows</code> and <code>ncols</code>) specify the number of rows     and columns in this grid. In our case, we just want a single plot, therefore we specify a grid having only one column     and one row. The parameter <code>figsize</code> specifies the size of the figure in inches. In our case     (<code>(8, 8)</code>) it will be 8 inches wide and 8 inches high. This function returns two different objects: a     Figure and an Axes. The Figure is the white space where we are going to put our plot, it is our plot container. The     Axes, despite its name, it is the plot itself. We did not initialise our plot yet, so the Axes object is empty, but this is     one of the standard procedure in Python: first create the space where to plot, then plot the data. Figure and Axes are     stored in the variables <code>fig</code> and <code>new_ax</code>, respectively;</li><li><code>filter = start_port_counts > 50</code>, if we plot ALL our data, the plot is going to look overcrowded. For this     reason, we can specify a threeshold and plotting only towns that appear a number of times that is higher than our     threeshold. In our case, and in the specific case of this plot, this number will be 50.     <code>start_port_counts > 50</code> is a Python <em>condition</em>, it basically creates an array with the same size     and features of <code>start_port_counts</code> containing boolean values (True and False) instead of numerical values.     When True and when False? If a value in <code>start_port_counts</code> is higher than 50, the corresponding boolean     value will be True, otherwise it will be False. We store this boolean array in the variable <code>filter</code> as     this can be used as a mask to filter out only those values corresponding to True     from an array with its same dimention and features;</li><li><code>sns.barplot(ax=new_ax,x=start_port_counts[filter],y=start_port_counts.index[filter])</code>, we use the     <code>seaborn</code> function <code>.barplot()</code> to create (guess what??) a barplot. The barplot will be     located in our just created Axes object, this is implemented using the argument <code>ax=new_ax</code>. We need to     specify which data to plot in the horizontal <code>x</code> and <code>y</code> axis. We want to plot town name in the     y axis and town name counts in the y axis. We also want to display only those data with more than 50 counts. We can     obtain this with <code>x=start_port_counts[filter]</code> and <code>y=start_port_counts.index[filter]</code>, as the     town name is specified in the <code>start_port_counts</code> index and the town counts in the     <code>start_port_counts</code> values;</li><li>We repeat the same procedure for the fifth and sixth column of our DataFrame.</li></ul>\n                    </div>       \n                </div>\n            </div>    \n        \n```\n:::\n:::\n\n\n::: {.cell execution_count=13}\n``` {.python .cell-code}\nstart_port = cleaned_df.iloc[:,3]\nstart_port_counts = start_port.value_counts()\nprint(type(start_port_counts))\nstart_port_counts\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n<class 'pandas.core.series.Series'>\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=13}\n```\nVoyage itinerary imputed port where began (ptdepimp) place\nLiverpool                       3227\nunknown                         2005\nLondon                          1874\nBahia, place unspecified        1815\nRio de Janeiro                  1464\n                                ... \nMangaratiba                        1\nMediterranean coast (France)       1\nCanasí                             1\nSanta Catarina                     1\nPortland                           1\nName: count, Length: 176, dtype: int64\n```\n:::\n:::\n\n\n::: {.cell execution_count=14}\n``` {.python .cell-code}\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\nfig, new_ax = plt.subplots(nrows=1,ncols=1,figsize=(8,8))\nfilter = start_port_counts > 50\nsns.barplot(ax=new_ax,x=start_port_counts[filter],y=start_port_counts.index[filter])\n```\n\n::: {.cell-output .cell-output-error}\n```\nModuleNotFoundError: No module named 'seaborn'\n```\n:::\n:::\n\n\n::: {.cell execution_count=15}\n``` {.python .cell-code}\nmain_pur_port = cleaned_df.iloc[:,4]\nmain_pur_counts = main_pur_port.value_counts()\nmain_pur_counts\n```\n\n::: {.cell-output .cell-output-display execution_count=15}\n```\nVoyage itinerary imputed principal place of slave purchase (mjbyptimp) \nAfrica, port unspecified                                3177\nLuanda                                                  1447\nWest Central Africa and St. Helena, port unspecified    1139\nBonny                                                    853\nGold Coast, port unspecified                             787\n                                                        ... \nPetit Mesurado                                             1\nEva                                                        1\nPokesoe (Princes Town)                                     1\nSassandra                                                  1\nSugary (Siekere)                                           1\nName: count, Length: 161, dtype: int64\n```\n:::\n:::\n\n\n::: {.cell execution_count=16}\n``` {.python .cell-code}\nfig, ax = plt.subplots(1,1,figsize=(8,8))\nfilter = main_pur_counts > 200\nsns.barplot(ax=ax,x=main_pur_counts[filter],y=main_pur_counts.index[filter])\n```\n\n::: {.cell-output .cell-output-error}\n```\nNameError: name 'plt' is not defined\n```\n:::\n:::\n\n\n::: {.cell execution_count=17}\n``` {.python .cell-code}\nmain_dis_port = cleaned_df.iloc[:,5]\nmain_dis_counts = main_dis_port.value_counts()\nmain_dis_counts\n```\n\n::: {.cell-output .cell-output-display execution_count=17}\n```\nVoyage itinerary imputed principal port of slave disembarkation (mjslptimp) place\nBahia, place unspecified       1720\nRio de Janeiro                 1651\nKingston                       1576\nBarbados, place unspecified    1524\nHavana                          893\n                               ... \nFrance, place unspecified         1\nSanta Marta                       1\nDois Rios                         1\nMaceió                            1\nBonny                             1\nName: count, Length: 240, dtype: int64\n```\n:::\n:::\n\n\n::: {.cell execution_count=18}\n``` {.python .cell-code}\nfig, ax = plt.subplots(1,1,figsize=(8,8))\nfilter = main_dis_counts > 150\nsns.barplot(ax=ax,x=main_dis_counts[filter],y=main_dis_counts.index[filter])\n```\n\n::: {.cell-output .cell-output-error}\n```\nNameError: name 'plt' is not defined\n```\n:::\n:::\n\n\n::: {.cell execution_count=19}\n\n::: {.cell-output .cell-output-display execution_count=19}\n```{=html}\n<style><style>.box {\n\tborder: 1px solid;\n    border-radius: 5px;\n\tpadding: 10px;\n\tmargin: 0px 10px 0px 10px;\n}\n\n.sub-box {\n  display: flex; \n  flex-direction: row; \n  align-items: center;\n}\n\n.code {\n\tbackground: #ececec; \n}\n\n.pre {\n\tbackground: #ececec; \n}\n\n.type1 {\n\tborder-color: black;\n\tbackground-color: rgb(246, 255, 222); \n}\n\n.type2 {\n\tborder-color: black;\n\tbackground-color: rgb(227, 242, 193); \n}\n\n.type3 {\n\tborder-color: black;\n\tbackground-color: rgb(201, 219, 178); \n}\n\n.type4 {\n\tborder-color: black;\n\tbackground-color: rgb(170, 200, 167); \n}\n\n.type5 {\n    border-color: black;\n\tbackground-color: rgb(181, 192, 208);\n}\n\n.type6 {\n    border-color: black;\n\tbackground-color: rgb(255, 195, 116);\n}\n\n.picture {\n\twidth: 30px; \n\theight: 30px;\n\tmargin: 0 0 0px 0;\n}\n\n.ctitle {\n    margin: 0px 0px 0px 20px;\n}</style></style>\n            <div class=\"box type6\">\n                <div class=\"sub-box\">\n                    <img src=\"myutils/icons/solution.png\" alt=\"Icon\" class=\"picture\"/>\n                    <div class=\"ctitle\">\n                        <u><h4><strong>Answer</strong></h4></u>\n                    </div>\n                </div>\n                <div class=\"sub-box\">\n                    The ports where most of the voyages took place are Liverpool and London (with a considerable percent being unkown). Most of the places where slaves have been purchased remain unkown, the second most occuring purchanse place is Luanda (mid Africa). The most frequent places of disimbarkation are Bahia and Rio de Janeiro, on the opposite side of the Atlantic Ocean at a similar latitude.\n                </div>\n            </div>    \n        \n```\n:::\n:::\n\n\nLet's try to make now a different type of visualization, a time series, i.e. a plot where we see how parameters change over time\n\n::: {.cell execution_count=20}\n\n::: {.cell-output .cell-output-display execution_count=20}\n```{=html}\n<style><style>.box {\n\tborder: 1px solid;\n    border-radius: 5px;\n\tpadding: 10px;\n\tmargin: 0px 10px 0px 10px;\n}\n\n.sub-box {\n  display: flex; \n  flex-direction: row; \n  align-items: center;\n}\n\n.code {\n\tbackground: #ececec; \n}\n\n.pre {\n\tbackground: #ececec; \n}\n\n.type1 {\n\tborder-color: black;\n\tbackground-color: rgb(246, 255, 222); \n}\n\n.type2 {\n\tborder-color: black;\n\tbackground-color: rgb(227, 242, 193); \n}\n\n.type3 {\n\tborder-color: black;\n\tbackground-color: rgb(201, 219, 178); \n}\n\n.type4 {\n\tborder-color: black;\n\tbackground-color: rgb(170, 200, 167); \n}\n\n.type5 {\n    border-color: black;\n\tbackground-color: rgb(181, 192, 208);\n}\n\n.type6 {\n    border-color: black;\n\tbackground-color: rgb(255, 195, 116);\n}\n\n.picture {\n\twidth: 30px; \n\theight: 30px;\n\tmargin: 0 0 0px 0;\n}\n\n.ctitle {\n    margin: 0px 0px 0px 20px;\n}</style></style> \n            <div class=\"box type1\">\n                    <div class=\"sub-box\">\n                        <img src=\"myutils/icons/question.png\" alt=\"Icon\" class=\"picture\"/>\n                        <div class=\"ctitle\">\n                            <u><h4><strong>Question(s)</strong></h4></u>\n                        </div>\n                    </div>\n                    <div class=\"sub-box\">\n                        How does the total number of disembarkated captives change over time?\n                    </div>\n            </div>\n        \n            <div class=\"box type2\">\n                <div class=\"sub-box\">\n                    <img src=\"myutils/icons/thinking.png\" alt=\"Icon\" class=\"picture\"/>\n                    <div class=\"ctitle\">\n                        <u><h4><strong>What to do?</strong></h4></u>\n                    </div>\n                </div>\n                <div class=\"sub-box\">\n                    <ul><li>Consider the data set columns containing information about time and number of captives</li><li>Group data rows by year</li><li>Sum the number of captives per year</li><li>Make a plot with years (time) on the x axis and number of captives on the y axis</li><li>Locate the minimum and the maximum of captives per year</li></ul>\n                </div>\n            </div>    \n        \n            <div class=\"box type3\">\n                <div class=\"sub-box\">\n                    <img src=\"myutils/icons/tools.png\" alt=\"Icon\" class=\"picture\"/>\n                    <div class=\"ctitle\">\n                        <u><h4><strong>(Python) Tools</strong></h4></u>\n                    </div>\n                </div>\n                <div class=\"sub-box\">\n                    <ul><li><code>pandas</code> method <code>.groupby()</code>;</li><li><code>parnas</code> method <code>.mean()</code>;</li><li>Python package <code>matplotlib.pyplot</code>;</li><li>Python package <code>seaborn</code>;</li><li><code>matplotlib.pyplot</code> function <code>.subplots()</code>;</li><li><code>seaborn</code> function <code>.lineplot()</code>;</li><li><code>matplotlib.pyplot</code> function <code>.grid()</code>;</li><li><code>pandas</code> method <code>.idxmin()</code>;</li><li><code>pandas</code> method <code>.idxmax()</code>;</li><li>Python function <code>print()</code></li></ul>\n                </div>            \n            </div>    \n        \n            <div class=\"box type4\">\n                <div class=\"sub-box\">\n                    <img src=\"myutils/icons/code_expl.png\" alt=\"Icon\" class=\"picture\"/>\n                    <div class=\"ctitle\">\n                        <u><h4><strong>Coding</strong></h4></u>\n                    </div>\n                </div>\n                <div class=\"sub-box\">\n                    <div>\n                        <ul><li><pre  style=\"display: inline-block; float: left; margin-right: 10px\">col_to_group = \"Year of arrival at port of disembarkation\"\ncol_to_sum = \"Captives arrived at 1st port\"</pre>, we select the two columns in the DataFrame we are interested in, the one containing the time     information and the one containing the number of captives. We store the name of these two columns in the     variables <code>col_to_group</code> and <code>col_to_sum</code>, respectively;</li><li><code>df_per_year = cleaned_df.groupby(col_to_group)[col_to_average].sum()</code>, we first apply the     method <code>.groupby()</code> to our cleaned DataFrame. <code>.groupby()</code> does exactly what it says, it     groups data according to a certain column (in our case the <code>col_to_group</code> column), this means that any     other method we are going to apply from now own, it will operate on groups of rows instead of the entire DataFrame.     For example, if we apply a method perfoming summation or average on a DataFrame grouped by year, python will     compute the sum or the average on those groups of data. In a DataFrame there are many columns containing values     to sum and average, so which column is Python going to choose? We need to specify it, in our case we do that     with <code>[col_to_sum]</code>, where the column to sum contains information about the number of captives. We     finally apply the method <code>.sum()</code> to compute the sum of number of captives on DataFrame rows grouped     by year. We store the result in the variable <code>df_per_year</code>;</li><li><code>sum_df_per_year</code>, we display our last result on the screen;</li><li><code>fig, my_ax = plt.subplots(nrows=1,ncols=1,figsize=(8,8))</code>, we use the function <code>.subplots()</code>     to create a single squared empty plot with size 8 inches. We obtain a Figure object (the container of our plot) and     a Axes object (an empty plot). We store these two objects in the variables <code>fig</code> and <code>my_ax</code>;</li><li><code>sns.lineplot(ax=my_ax,x=sum_df_per_year.index,y=sum_df_per_year)</code>, we use the method     <code>.lineplot()</code> to create a line plot (data points connected by a line). We plot the index of the Series     (a Series is a DataFrame with only one column) <code>df_per_year</code> on the x axis and its values on the y axis.</li><li><code>plt.grid()</code>, we use the function <code>.grid()</code> to overplot a grid on our plot, with the purpose of     better describe the data by eye;</li><li><pre  style=\"display: inline-block; float: left; margin-right: 10px\">max_index = df_per_year.idxmax();\nmin_index = df_per_year.idxmin();\nprint('The minimum number of captives per year is:', df_per_year[min_index],'on',min_index);\nprint('The maximum number of captives per year is:', df_per_year[max_index],'on',max_index).</pre>, we apply the method <code>.idxmax()</code> to the Series <code>df_per_year</code> to get the index     corresponding to the maximum of its values. Remember that <code>df_per_year</code> indeces are year and its values     are the sum of number of captives in that year. Therefore, obtaining the index corresponding to the maximum value     means determining the year having the maximum number of captives. We store this result in the variable     <code>max_index</code>. We can use this index to retrieve the corresponding value:     <code>df_per_year[max_index]</code>. We repeat the same procedure for the minimum value using     <code>.idxmin()</code>. We finally print both results on the screen with the function <code>print()</code>.</li></ul>\n                    </div>       \n                </div>\n            </div>    \n        \n```\n:::\n:::\n\n\n::: {.cell execution_count=21}\n``` {.python .cell-code}\ncol_to_group = 'Year of arrival at port of disembarkation'\ncol_to_sum = 'Captives arrived at 1st port'\ndf_per_year = cleaned_df.groupby(col_to_group)[col_to_sum].sum()\nprint(df_per_year.shape)\ndf_per_year\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n(298,)\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=21}\n```\nYear of arrival at port of disembarkation\n1520.0       44.0\n1526.0      115.0\n1527.0       46.0\n1532.0      589.0\n1534.0      354.0\n           ...   \n1862.0    11407.0\n1863.0     6739.0\n1864.0     3298.0\n1865.0      795.0\n1866.0      700.0\nName: Captives arrived at 1st port, Length: 298, dtype: float64\n```\n:::\n:::\n\n\n::: {.cell execution_count=22}\n``` {.python .cell-code}\nfig, ax = plt.subplots(1,1,figsize=(8,8))\nsns.lineplot(ax=ax,x=df_per_year.index,y=df_per_year)\nplt.grid()\n```\n\n::: {.cell-output .cell-output-error}\n```\nNameError: name 'plt' is not defined\n```\n:::\n:::\n\n\n::: {.cell execution_count=23}\n``` {.python .cell-code}\nmax_index = df_per_year.idxmax()\nmin_index = df_per_year.idxmin()\nprint('The minimum number of captives per year is:', df_per_year[min_index],'on',min_index)\nprint('The maximum number of captives per year is:', df_per_year[max_index],'on',max_index)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nThe minimum number of captives per year is: 2.0 on 1538.0\nThe maximum number of captives per year is: 79472.0 on 1829.0\n```\n:::\n:::\n\n\n::: {.cell execution_count=24}\n``` {.python .cell-code}\nsolution = 'The total number of captives is almost constant up to 1650, with the exception of two peaks around 1600 \\\nand 1622. The number increases steadily up to 1800 and decreases afterwords. The times series is not smooth, but it proceeds \\\nby low and high peek. The number of captives per year reaches its maximum on 1829 with almost 80 thousands slaves traded \\\nthat year. The minimum is 2 captives on 1538.'\nquestion_box(solution=solution)\n```\n\n::: {.cell-output .cell-output-display execution_count=24}\n```{=html}\n<style><style>.box {\n\tborder: 1px solid;\n    border-radius: 5px;\n\tpadding: 10px;\n\tmargin: 0px 10px 0px 10px;\n}\n\n.sub-box {\n  display: flex; \n  flex-direction: row; \n  align-items: center;\n}\n\n.code {\n\tbackground: #ececec; \n}\n\n.pre {\n\tbackground: #ececec; \n}\n\n.type1 {\n\tborder-color: black;\n\tbackground-color: rgb(246, 255, 222); \n}\n\n.type2 {\n\tborder-color: black;\n\tbackground-color: rgb(227, 242, 193); \n}\n\n.type3 {\n\tborder-color: black;\n\tbackground-color: rgb(201, 219, 178); \n}\n\n.type4 {\n\tborder-color: black;\n\tbackground-color: rgb(170, 200, 167); \n}\n\n.type5 {\n    border-color: black;\n\tbackground-color: rgb(181, 192, 208);\n}\n\n.type6 {\n    border-color: black;\n\tbackground-color: rgb(255, 195, 116);\n}\n\n.picture {\n\twidth: 30px; \n\theight: 30px;\n\tmargin: 0 0 0px 0;\n}\n\n.ctitle {\n    margin: 0px 0px 0px 20px;\n}</style></style>\n            <div class=\"box type6\">\n                <div class=\"sub-box\">\n                    <img src=\"myutils/icons/solution.png\" alt=\"Icon\" class=\"picture\"/>\n                    <div class=\"ctitle\">\n                        <u><h4><strong>Answer</strong></h4></u>\n                    </div>\n                </div>\n                <div class=\"sub-box\">\n                    The total number of captives is almost constant up to 1650, with the exception of two peaks around 1600 and 1622. The number increases steadily up to 1800 and decreases afterwords. The times series is not smooth, but it proceeds by low and high peek. The number of captives per year reaches its maximum on 1829 with almost 80 thousands slaves traded that year. The minimum is 2 captives on 1538.\n                </div>\n            </div>    \n        \n```\n:::\n:::\n\n\nTime series are very interesting to describe the trends of phenomema at different scale. Our plot ticks are separated by 50 years, this is fine to visualise trends over centuries, but we cannot see what's happening on decades.\n\n::: {.cell execution_count=25}\n\n::: {.cell-output .cell-output-display execution_count=25}\n```{=html}\n<style><style>.box {\n\tborder: 1px solid;\n    border-radius: 5px;\n\tpadding: 10px;\n\tmargin: 0px 10px 0px 10px;\n}\n\n.sub-box {\n  display: flex; \n  flex-direction: row; \n  align-items: center;\n}\n\n.code {\n\tbackground: #ececec; \n}\n\n.pre {\n\tbackground: #ececec; \n}\n\n.type1 {\n\tborder-color: black;\n\tbackground-color: rgb(246, 255, 222); \n}\n\n.type2 {\n\tborder-color: black;\n\tbackground-color: rgb(227, 242, 193); \n}\n\n.type3 {\n\tborder-color: black;\n\tbackground-color: rgb(201, 219, 178); \n}\n\n.type4 {\n\tborder-color: black;\n\tbackground-color: rgb(170, 200, 167); \n}\n\n.type5 {\n    border-color: black;\n\tbackground-color: rgb(181, 192, 208);\n}\n\n.type6 {\n    border-color: black;\n\tbackground-color: rgb(255, 195, 116);\n}\n\n.picture {\n\twidth: 30px; \n\theight: 30px;\n\tmargin: 0 0 0px 0;\n}\n\n.ctitle {\n    margin: 0px 0px 0px 20px;\n}</style></style> \n            <div class=\"box type1\">\n                    <div class=\"sub-box\">\n                        <img src=\"myutils/icons/question.png\" alt=\"Icon\" class=\"picture\"/>\n                        <div class=\"ctitle\">\n                            <u><h4><strong>Question(s)</strong></h4></u>\n                        </div>\n                    </div>\n                    <div class=\"sub-box\">\n                        What's the disembarked captive trend between 1700 and 1750?\n                    </div>\n            </div>\n        \n            <div class=\"box type2\">\n                <div class=\"sub-box\">\n                    <img src=\"myutils/icons/thinking.png\" alt=\"Icon\" class=\"picture\"/>\n                    <div class=\"ctitle\">\n                        <u><h4><strong>What to do?</strong></h4></u>\n                    </div>\n                </div>\n                <div class=\"sub-box\">\n                    <ul><li>Go through the steps for making the previous plot filtering data spanning between 1700 and 1750</li></ul>\n                </div>\n            </div>    \n        \n            <div class=\"box type3\">\n                <div class=\"sub-box\">\n                    <img src=\"myutils/icons/tools.png\" alt=\"Icon\" class=\"picture\"/>\n                    <div class=\"ctitle\">\n                        <u><h4><strong>(Python) Tools</strong></h4></u>\n                    </div>\n                </div>\n                <div class=\"sub-box\">\n                    <ul><li>Python package <code>matplotlib.pyplot</code>;</li><li>Python package <code>seaborn</code>;</li><li><code>matplotlib.pyplot</code> function <code>.subplots()</code>;</li><li><code>seaborn</code> function <code>.lineplot()</code>;</li><li><code>matplotlib.pyplot</code> function <code>.grid()</code>.</li></ul>\n                </div>            \n            </div>    \n        \n            <div class=\"box type4\">\n                <div class=\"sub-box\">\n                    <img src=\"myutils/icons/code_expl.png\" alt=\"Icon\" class=\"picture\"/>\n                    <div class=\"ctitle\">\n                        <u><h4><strong>Coding</strong></h4></u>\n                    </div>\n                </div>\n                <div class=\"sub-box\">\n                    <div>\n                        <ul><li><code>time_filter = (df_per_year.index > 1700) & (df_per_year.index < 1750)</code>, we start using the <code>pandas</code> Series <code>df_per_year</code>. This     series contains information about the total number of captives per year. Years are contained in its index, number of captives in its values. We want to select     data between 1700 and 1750, so with years larger than 1700 and smaller than 1750. We do that using two Python conditions: <code>df_per_year.index > 1700</code> and     <code>df_per_year.index < 1750</code>. As we want these two conditions to be true at the same time, we specify both of them with the symbol <code>&</code> in     between. In Python, the commertial & indicates a logical AND, this means that the condition before and after the AND must both be simultaneously true. We store     this condition into the variable <code>time_filter</code>;</li><li><pre  style=\"display: inline-block; float: left; margin-right: 10px\">fig, ax = plt.subplots(1,1,figsize=(8,8))\nsns.lineplot(ax=ax,x=df_per_year.index[time_filter],y=df_per_year[time_filter])\nplt.grid()</pre>, as we did in the previous task, we plot total number of captives versus years. This time, instead of using our full array, we want to plot only     a certain time range. This has been specified in the condition stored into <code>time_filter</code>. Therefore, compared to our previous plot, we are going to     user <code>df_per_year.index[time_filter]</code> and df_per_year[time_filter]</code> instead of <code>df_per_year.index</code> and df_per_year</code>, respectively.</li></ul>\n                    </div>       \n                </div>\n            </div>    \n        \n```\n:::\n:::\n\n\n::: {.cell execution_count=26}\n``` {.python .cell-code}\ntime_filter = (df_per_year.index > 1700) & (df_per_year.index < 1750)\nfig, ax = plt.subplots(1,1,figsize=(8,8))\nsns.lineplot(ax=ax,x=df_per_year.index[time_filter],y=df_per_year[time_filter])\nplt.grid()\n```\n\n::: {.cell-output .cell-output-error}\n```\nNameError: name 'plt' is not defined\n```\n:::\n:::\n\n\n\n",
    "supporting": [
      "ch4_data_analysis_files/figure-epub"
    ],
    "filters": [],
    "engineDependencies": {
      "jupyter": [
        {
          "jsWidgets": true,
          "jupyterWidgets": false,
          "htmlLibraries": []
        }
      ]
    }
  }
}